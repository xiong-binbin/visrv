webpackJsonp([1],{"/9rB":function(t,e){},"/wni":function(t,e){},"3gzY":function(t,e){},"4+hh":function(t,e){},AnE8:function(t,e){},Jh7j:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App"},s,!1,function(t){i("ogXs")},null,null).exports,l=i("mtWM"),o=i.n(l),d=i("Lgyv"),c=i.n(d),r=(i("4+hh"),i("AnE8"),i("/ocq")),u={name:"Index",data:function(){return{host:"http://127.0.0.1:5000",article:[]}},created:function(){var t=this;this.$axios.get(this.host+"/api/page?name=index").then(function(e){var i=JSON.parse(e.data);t.article=i.article}).catch(function(t){console.log(t)})}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("div",{staticClass:"article"},[i("h1",{staticClass:"article-title"},[t._v("文档")]),t._v(" "),i("div",{staticClass:"article-list md-layout md-gutter"},[i("div",{staticClass:"md-layout-item"},t._l(t.article.list_0,function(e){return i("md-list",{key:e.id},[i("md-list-item",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.title))])],1)}),1),t._v(" "),i("div",{staticClass:"md-layout-item"},t._l(t.article.list_1,function(e){return i("md-list",{key:e.id},[i("md-list-item",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.title))])],1)}),1),t._v(" "),i("div",{staticClass:"md-layout-item"},t._l(t.article.list_2,function(e){return i("md-list",{key:e.id},[i("md-list-item",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.title))])],1)}),1),t._v(" "),i("div",{staticClass:"md-layout-item"},t._l(t.article.list_3,function(e){return i("md-list",{key:e.id},[i("md-list-item",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.title))])],1)}),1),t._v(" "),i("div",{staticClass:"md-layout-item"},t._l(t.article.list_4,function(e){return i("md-list",{key:e.id},[i("md-list-item",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.title))])],1)}),1),t._v(" "),i("div",{staticClass:"md-layout-item"},t._l(t.article.list_5,function(e){return i("md-list",{key:e.id},[i("md-list-item",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.title))])],1)}),1)])])])},staticRenderFns:[]};var h=i("VU/8")(u,m,!1,function(t){i("fFzc")},"data-v-3c5ffa4a",null).exports,f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"help"},[e("iframe",{staticStyle:{width:"1200px",height:"600px"},attrs:{src:"http://127.0.0.1:5000/static/pdf/20200109225532.pdf"}})])}]};var v=i("VU/8")({name:"help",data:function(){return{}},methods:{},mounted:function(){}},f,!1,function(t){i("ysWS")},"data-v-8163f21e",null).exports,p={name:"Article",data:function(){return{expandSingle:!1,icon:["whatshot","layers","description","storage","flash_on","pages","cached","filter_drama"],menus:[],sIndex:null,sId:null,content:null,articleInfo:{key:"",value:""},host:"http://127.0.0.1:5000"}},methods:{onMenuClicked:function(t,e){var i=this;null!=this.sIndex&&(this.menus[this.sIndex].items[this.sId].active=!1),this.menus[t].items[e].active=!0,this.sIndex=t,this.sId=e,""!=this.menus[t].items[e].link?this.$axios.get(this.host+this.menus[t].items[e].link).then(function(t){i.content=t.data}).catch(function(t){console.log(t)}):this.content=""},onAddClicked:function(){var t=this.$route.query.id;window.open("/editor?action=add&id="+t,"_blank")},onEditClicked:function(){if(null!=this.sIndex){var t=this.$route.query.id,e=100*this.sIndex+this.sId;window.open("/editor?action=edit&id="+t+"&selected="+e,"_blank")}},onDeleteClicked:function(){if(null!=this.sIndex){if(0==this.sId&&1==this.menus[this.sIndex].items.length)this.articleInfo.value.menus.splice(this.sIndex,1);else{this.articleInfo.value.menus[this.sIndex].items.splice(this.sId,1);for(var t=0;t<this.articleInfo.value.menus[this.sIndex].items.length;t++)this.articleInfo.value.menus[this.sIndex].items[t].id=t;for(t=0;t<this.articleInfo.value.menus.length;t++)this.articleInfo.value.menus[t].active=!1}this.$axios.post(this.host+"/api/article",this.articleInfo).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),location.reload()}}},created:function(){var t=this,e=this.$route.query.id,i=this.$route.query.selected;this.$axios.get(this.host+"/api/article?id="+e).then(function(n){var s=JSON.parse(n.data);t.articleInfo.key=e,t.articleInfo.value=s,t.menus=s.menus,null!=i&&(t.sIndex=parseInt(i/100),t.sId=parseInt(i%100),t.menus[t.sIndex].active=!0,t.menus[t.sIndex].items[t.sId].active=!0,""!=t.menus[t.sIndex].items[t.sId].link&&t.$axios.get(t.host+t.menus[t.sIndex].items[t.sId].link).then(function(e){t.content=e.data}).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article"},[i("md-toolbar",{attrs:{"md-elevation":"1"}},[i("div",{staticClass:"md-toolbar-row"},[i("div",{staticClass:"md-toolbar-section-start"},[i("h3",{staticClass:"md-title"},[t._v("Hikvision")])])])]),t._v(" "),i("div",{staticClass:"drawer-menu"},[i("md-list",{attrs:{"md-expand-single":t.expandSingle}},t._l(t.menus,function(e){return i("md-list-item",{key:e.index,attrs:{"md-expand":"","md-expanded":e.active},on:{"update:mdExpanded":function(i){return t.$set(e,"active",i)},"update:md-expanded":function(i){return t.$set(e,"active",i)}}},[i("md-icon",[t._v(t._s(t.icon[e.index]))]),t._v(" "),i("span",{staticClass:"md-list-item-text"},[t._v(t._s(e.name))]),t._v(" "),i("md-list",{attrs:{slot:"md-expand"},slot:"md-expand"},t._l(e.items,function(n){return i("md-list-item",{key:n.id,staticClass:"md-inset",class:{"list-item-active":n.active},on:{click:function(i){return t.onMenuClicked(e.index,n.id)}}},[t._v("\n              "+t._s(n.title)+"\n            ")])}),1)],1)}),1)],1),t._v(" "),i("md-speed-dial",{attrs:{"md-direction":"top"}},[i("md-speed-dial-target",{staticClass:"md-primary"},[i("md-icon",[t._v("add")])],1),t._v(" "),i("md-speed-dial-content",[i("md-button",{staticClass:"md-icon-button",on:{click:function(e){return t.onAddClicked()}}},[i("md-icon",[t._v("add")])],1),t._v(" "),i("md-button",{staticClass:"md-icon-button",on:{click:function(e){return t.onEditClicked()}}},[i("md-icon",[t._v("edit")])],1),t._v(" "),i("md-button",{staticClass:"md-icon-button",on:{click:function(e){return t.onDeleteClicked()}}},[i("md-icon",[t._v("delete")])],1)],1)],1),t._v(" "),i("div",{staticClass:"doc-content"},[i("div",{staticStyle:{height:"100%"},domProps:{innerHTML:t._s(t.content)}})])],1)},staticRenderFns:[]};var I=i("VU/8")(p,_,!1,function(t){i("3gzY"),i("/9rB")},"data-v-03b827c7",null).exports,k=i("sYY+"),b=i.n(k),g={name:"Editor",data:function(){return{menus:[],action:null,sIndex:null,sId:null,activeTab:null,showSnackbar:!1,snackbarContent:null,pdfName:null,editorContent:null,articleSort:null,articleSortList:[],articleTitle:null,documentInfo:{key:"",value:""},articleInfo:{key:"",value:""},addMenu:{index:null,name:null,active:!1,items:[{id:0,title:null,link:null,active:!1}]},addItem:{id:null,title:null,link:null,active:!1},host:"http://127.0.0.1:5000"}},methods:{switchTabs:function(t){this.activeTab=t},changePDF:function(t){var e=this,i=new FormData;i.append("file",t[0]),this.$axios.post(this.host+"/upload/pdf",i).then(function(t){e.pdfName=t.data,e.snackbarContent="pdf文件上传成功！",e.showSnackbar=!0}).catch(function(t){console.log(t)})},submitDocument:function(){var t=this,e=this.getNowFormatDate();if(null==this.articleSort||null==this.articleTitle)return this.snackbarContent="类别或标题不能为空，提交失败！",void(this.showSnackbar=!0);if("tab-edit"==this.activeTab&&null==this.editorContent||"tab-pdf"==this.activeTab&&null==this.pdfName)return this.snackbarContent="填入内容不能为空，提交失败！",void(this.showSnackbar=!0);if("add"==this.action){this.documentInfo.key=e,"tab-edit"==this.activeTab?this.documentInfo.value=this.editorContent:"tab-pdf"==this.activeTab&&(this.documentInfo.value='<iframe id="pdf-frame" src="'+this.host+"/static/pdf/"+this.pdfName+'"></iframe>');for(var i=0;i<this.menus.length;i++)if(this.menus[i].name==this.articleSort){this.addItem.id=this.menus[i].items.length,this.addItem.title=this.articleTitle,this.addItem.link="/api/document?id="+e,this.articleInfo.value.menus[i].items.push(this.addItem);break}i==this.menus.length&&(this.addMenu.index=this.menus.length,this.addMenu.name=this.articleSort,this.addMenu.items[0].title=this.articleTitle,this.addMenu.items[0].link="/api/document?id="+e,this.articleInfo.value.menus.push(this.addMenu))}else"edit"==this.action&&(""==this.menus[this.sIndex].items[this.sId].link?(this.documentInfo.key=e,this.articleInfo.value.menus[this.sIndex].items[this.sId].link="/api/document?id="+e):this.documentInfo.key=this.menus[this.sIndex].items[this.sId].link.split("id=")[1],"tab-edit"==this.activeTab?this.documentInfo.value=this.editorContent:"tab-pdf"==this.activeTab&&(this.documentInfo.value='<iframe id="pdf-frame" src="'+this.host+"/static/pdf/"+this.pdfName+'"></iframe>'));this.$axios.post(this.host+"/api/article",this.articleInfo).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.$axios.post(this.host+"/api/document",this.documentInfo).then(function(e){t.snackbarContent="提交成功！",t.showSnackbar=!0}).catch(function(t){console.log(t)})}},mounted:function(){var t=this,e=new b.a(this.$refs.editor);e.customConfig.uploadImgShowBase64=!0,e.customConfig.onchange=function(e){t.editorContent=e},e.create();var i=this.$route.query.id,n=this.$route.query.selected;this.action=this.$route.query.action,this.$axios.get(this.host+"/api/article?id="+i).then(function(s){var a=JSON.parse(s.data);t.articleInfo.key=i,t.articleInfo.value=a,t.menus=a.menus;for(var l=0;l<t.menus.length;l++)t.articleSortList.push(t.menus[l].name);"edit"==t.action&&null!=n&&(t.sIndex=parseInt(n/100),t.sId=parseInt(n%100),t.articleSort=t.menus[t.sIndex].name,t.articleTitle=t.menus[t.sIndex].items[t.sId].title,""!=t.menus[t.sIndex].items[t.sId].link&&t.$axios.get(t.host+t.menus[t.sIndex].items[t.sId].link).then(function(i){-1==i.data.search("pdf-frame")&&(e.txt.html(i.data),t.editorContent=i.data)}).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("md-tabs",{attrs:{"md-alignment":"centered"},on:{"md-changed":t.switchTabs}},[i("md-tab",{attrs:{id:"tab-edit","md-label":"编辑"}},[i("div",{ref:"editor",staticClass:"wangeditor"})]),t._v(" "),i("md-tab",{attrs:{id:"tab-pdf","md-label":"PDF"}},[i("div",{staticClass:"pdf-upload"},[i("md-field",[i("label",[t._v("请选择上传的PDF文档")]),t._v(" "),i("md-file",{on:{"md-change":t.changePDF}})],1)],1)])],1),t._v(" "),i("div",{staticClass:"editor-sort md-layout md-gutter"},[i("div",{staticClass:"md-layout-item"},["add"==t.action?i("md-autocomplete",{attrs:{"md-options":t.articleSortList},model:{value:t.articleSort,callback:function(e){t.articleSort=e},expression:"articleSort"}},[i("label",[t._v("类别")])]):t._e()],1),t._v(" "),i("div",{staticClass:"md-layout-item"},["add"==t.action?i("md-field",[i("label",[t._v("标题")]),t._v(" "),i("md-input",{model:{value:t.articleTitle,callback:function(e){t.articleTitle=e},expression:"articleTitle"}})],1):t._e()],1)]),t._v(" "),i("div",{staticClass:"editor-operate md-layout md-gutter"},[i("div",{staticClass:"md-layout-item"}),t._v(" "),i("div",{staticClass:"md-layout-item"}),t._v(" "),i("div",{staticClass:"md-layout-item"},[i("md-button",{staticClass:"md-raised md-primary",on:{click:t.submitDocument}},[t._v("提交")])],1),t._v(" "),i("div",{staticClass:"md-layout-item"},[i("md-button",{staticClass:"md-raised md-primary",on:{click:t.submitDocument}},[t._v("取消")])],1),t._v(" "),i("div",{staticClass:"md-layout-item"}),t._v(" "),i("div",{staticClass:"md-layout-item"})]),t._v(" "),i("md-snackbar",{attrs:{"md-position":"center","md-duration":2e3,"md-active":t.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(e){t.showSnackbar=e},"update:md-active":function(e){t.showSnackbar=e}}},[i("span",[t._v(t._s(t.snackbarContent))])])],1)},staticRenderFns:[]};var C=i("VU/8")(g,x,!1,function(t){i("/wni"),i("Jh7j")},"data-v-b6da217a",null).exports;n.default.use(r.a);var y=new r.a({mode:"history",routes:[{path:"/",name:"Index",component:h},{path:"/help",name:"Help",component:v},{path:"/article",name:"Article",component:I},{path:"/editor",name:"Editor",component:C}]});n.default.config.productionTip=!1,n.default.use(c.a),n.default.prototype.$axios=o.a,n.default.prototype.getNowFormatDate=function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),s=t.getHours(),a=t.getMinutes(),l=t.getSeconds();return i>=0&&i<=9&&(i="0"+i),n>=0&&n<=9&&(n="0"+n),s>=0&&s<=9&&(s="0"+s),a>=0&&a<=9&&(a="0"+a),l>=0&&l<=9&&(l="0"+l),""+e+i+n+s+a+l},new n.default({el:"#app",router:y,components:{App:a},template:"<App/>"})},fFzc:function(t,e){},ogXs:function(t,e){},ysWS:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3ffe654f28c3bc70ca86.js.map